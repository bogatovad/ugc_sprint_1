### Исследование MongoDB

**users**
```
  {
      "_id": <uuid_string>,
      "bookmarks": [<uuid_string>, ...]
  }   
```

В таблице приведена зависимость скорости чтения в микросекундах (10^-6 c) и скорости записи в миллисекундах (10^-3) в MongoDB в зависимости от количества записей на чтение/запись (n).

| n         | Средняя скорость чтения (мкс) | Средняя скорость записи (мс) |
|:----------|:------------------------------|:-----------------------------|
| 10        |                          24.7 |                         18.4 |
| 100       |                          19.7 |                         23.6 |
| 200       |                          24.2 |                         24.9 |
| 500       |                          21.8 |                         33.2 |
| 1_000     |                          20.7 |                         48.7 |
| 2_000     |                          27.4 |                         79.3 |
| 5_000     |                            26 |                        186.4 |
| 10_000    |                            21 |                        296.3 |
| 100_000   |                            60 |                       3075.6 |
| 200_000   |                          25.7 |                       5614.8 |
| 500_000   |                          23.4 |                      13984.4 |
| 1_000_000 |                          30.3 |                      23305.1 |  

### Исследование PostgreSQL

В базе PostgreSQL были созданы следующие таблицы:
```
    CREATE TABLE IF NOT EXISTS users (
        id int PRIMARY KEY,
        name VARCHAR(255) NOT NULL
    );


    CREATE TABLE IF NOT EXISTS movies (
        id int PRIMARY KEY,
        title VARCHAR(255) NOT NULL
    );

    CREATE TABLE IF NOT EXISTS bookmarks (
        user_id int REFERENCES users(id),
        movie_id int REFERENCES movies(id),
        PRIMARY KEY (user_id, movie_id)
    );
```

Далее замерялась скорость записи/чтения в таблицу bookmarks в зависимости от числа закладок (n):

| n         | Средняя скорость чтения (мс) | Средняя скорость записи (мс) |
|:----------|:-----------------------------|:-----------------------------|
| 1_000     | 1.8                          | 69.1                         |
| 3_000     | 2.5                          | 85                           |
| 8_000     | 5.3                          | 202                          |
| 18_000    | 17.2                         | 392                          |
| 117_000   | 40.8                         | 3737                         |
| 310_000   | 142                          | 6983                         |
| 758_000   | 516                          | 17820                        |
| 1_505_000 | 611                          | 300441                       |


Исходя из полученных данных, можно сказать, что MongoDB лучше подходит для хранения пользовательских данных (оценки и рецензии к фильмам) чем PostreSQL по скорости чтения.   
Mongo с большим запасом удовлетворяет требуемым показателям - скорость чтения во всех случаях не превышает 100 мкс, а на запись не превышает 200 мс при n=5000.

С ĸодом можно ознаĸомиться в jupyter-notebook.